var noteMe = noteMe || {};
(function() {

    var makeRoute = function(jsr) {
        var urlMethod = jsr.url,
            url = jsr.url();
        jsr.type = jsr.method;
        delete(jsr.method);
        return {
            ajax: function(obj) {
                jsr.url = urlMethod.call({},obj?obj.urlParams:{});
                $.ajax($.extend(jsr,obj));
            },
            url: url,
            type: jsr.type
        };
    };
    
    noteMe.jsRoutes = {
        viewNote: makeRoute(#{jsRoute @NoteManager.viewNote(':id') /}),
        newNotebook: makeRoute(#{jsRoute @NoteManager.newNotebook() /}),
        saveNewNotebook: makeRoute(#{jsRoute @NoteManager.saveNewNotebook() /}),
        newNote: makeRoute(#{jsRoute @NoteManager.newNote() /}),
        saveNewNote: makeRoute(#{jsRoute @NoteManager.saveNewNote() /}),

        search: makeRoute(#{jsRoute @NoteManager.search() /}),
        searchForTags: makeRoute(#{jsRoute @NoteManager.searchForTags() /}),

        shareNote: makeRoute(#{jsRoute @Share.shareNote() /}),
        shareNotebook: makeRoute(#{jsRoute @Share.shareNotebook() /}),
        sharePublic: makeRoute(#{jsRoute @Share.sharePublic() /}),
        unsharePublic: makeRoute(#{jsRoute @Share.unsharePublic() /}),
        knownMail: makeRoute(#{jsRoute @Share.knownMail() /}),
        sharing: makeRoute(#{jsRoute @Share.sharing() /}),

        orderNotebooks: makeRoute(#{jsRoute @NoteManager.orderNotebooks() /}),
        orderNotes: makeRoute(#{jsRoute @NoteManager.orderNotes() /}),
        rename: makeRoute(#{jsRoute @NoteManager.rename() /}),
        remove: makeRoute(#{jsRoute @NoteManager.remove() /}),
        removeTagFromNote: makeRoute(#{jsRoute @NoteManager.removeTagFromNote() /}),
        addTagToNote: makeRoute(#{jsRoute @NoteManager.addTagToNote() /}),
        saveNewTag: makeRoute(#{jsRoute @NoteManager.saveNewTag() /}),

        saveNote: makeRoute(#{jsRoute @Edit.saveNote() /}),
        editNote: makeRoute(#{jsRoute @Edit.editNote(':id') /}),

        manageAccount: makeRoute(#{jsRoute @AccountManager.manageAccount() /}),
        accountManager: makeRoute(#{jsRoute @AccountManager.accountManager() /}),
        deleteAccountDialog: makeRoute(#{jsRoute @AccountManager.deleteAccountDialog() /}),
        deleteAccount: makeRoute(#{jsRoute @AccountManager.deleteAccount() /}),

        imageUpload: makeRoute(#{jsRoute @Edit.imageUpload() /})
    };
}());
